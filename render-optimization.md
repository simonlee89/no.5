# Render 성능 최적화 가이드

## 🚀 배포 성능 개선 방법

### 1. 환경 변수 설정
Render 대시보드의 Environment 탭에서 다음 변수들을 추가하세요:

```
RENDER=true
PYTHONOPTIMIZE=1
PYTHONUNBUFFERED=1
```

### 2. Build Command 최적화
```bash
pip install --no-cache-dir -r requirements.txt
```

### 3. Start Command 최적화
```bash
python main.py
```

### 4. 추가 성능 개선 팁

#### A. 캐시 활용 극대화
- 첫 방문 후 24시간 동안 지오코딩 결과가 캐시됨
- Google Sheets 데이터는 1시간 동안 캐시됨
- 브라우저 재방문 시 훨씬 빠른 속도

#### B. 피크 시간 피하기
- 서버 리소스가 제한적이므로 사용자가 많은 시간대 피하기
- 새벽이나 늦은 밤에 테스트하면 더 빠른 성능

#### C. 데이터 미리 로딩
- 서버 시작 시 주요 데이터(강남월세, 강남전세) 자동 로딩
- 첫 번째 검색부터 빠른 응답 제공

### 5. 성능 모니터링
앱 로그에서 다음 정보를 확인할 수 있습니다:
- 메모리 사용량
- 캐시 크기
- API 응답 시간

### 6. 문제 해결

#### 메모리 부족 시:
1. 캐시 수동 클리어: `POST /api/cache/clear`
2. 서버 재시작 (Render 대시보드에서)

#### 느린 응답 시:
1. 로그에서 병목 지점 확인
2. 캐시 상태 확인
3. 필요시 캐시 클리어 후 재시작

### 7. 업그레이드 고려사항

현재 Starter 플랜 (512MB, 0.5 CPU)에서 다음 플랜으로 업그레이드하면 성능이 크게 향상됩니다:

- **Hobby 플랜**: 1GB RAM, 1 CPU ($7/월)
- **Pro 플랜**: 4GB RAM, 2 CPU ($25/월)

### 8. 코드 최적화 완료 사항

✅ Google Sheets 캐시 시간 30분 → 1시간 증가  
✅ 지오코딩 배치 크기 5개 → 10개 증가  
✅ API 호출 간격 100ms → 50ms 단축  
✅ 메모리 자동 관리 (50MB 제한)  
✅ 데이터 사전 로딩 (서버 시작 시)  
✅ Render 환경 최적화 자동 적용  

이제 GitHub에 푸시하고 Render에서 재배포하면 성능이 개선됩니다! 