{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- ÏßÄÎèÑ (Ï†ÑÏ≤¥ ÌôîÎ©¥) -->
        <div class="col-12 p-0">
            <div id="map"></div>
            
            <!-- ÏßÄÎèÑ ÏúÑÏóê Îñ†ÏûàÎäî Îß§Î¨º ÌïÑÌÑ∞ -->
            <div class="toss-floating-filter">
                <div class="toss-filter-container">
                    <div class="toss-filter-header" id="filterToggle">
                        <div class="toss-filter-title">
                            <svg class="toss-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M3 7H21L19 12H5L3 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M9 12V19L15 16V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Îß§Î¨º ÌïÑÌÑ∞</span>
                        </div>
                        <svg class="toss-chevron" id="chevronIcon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    
                    <div class="toss-filter-content" id="filterContent">
                        <!-- Í≤ÄÏÉâ ÏûÖÎ†• -->
                        <div class="toss-input-group">
                            <input type="text" class="toss-input" id="searchInput" placeholder="ÏßÄÏó≠Î™ÖÏúºÎ°ú Í≤ÄÏÉâÌï¥Î≥¥ÏÑ∏Ïöî">
                            <svg class="toss-input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                                <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>

                        <!-- ÏãúÌä∏ ÏÑ†ÌÉù -->
                        <div class="toss-section">
                            <label class="toss-label">Îß§Î¨º Ïú†Ìòï</label>
                            <div class="toss-sheet-grid">
                                <input type="radio" class="toss-sheet-radio" name="sheetType" id="gangnam-monthly" value="Í∞ïÎÇ®ÏõîÏÑ∏" checked>
                                <label class="toss-sheet-button" for="gangnam-monthly">Í∞ïÎÇ®ÏõîÏÑ∏</label>
                                
                                <input type="radio" class="toss-sheet-radio" name="sheetType" id="gangnam-jeonse" value="Í∞ïÎÇ®Ï†ÑÏÑ∏">
                                <label class="toss-sheet-button" for="gangnam-jeonse">Í∞ïÎÇ®Ï†ÑÏÑ∏</label>
                                
                                <input type="radio" class="toss-sheet-radio" name="sheetType" id="songpa-monthly" value="ÏÜ°ÌååÏõîÏÑ∏">
                                <label class="toss-sheet-button" for="songpa-monthly">ÏÜ°ÌååÏõîÏÑ∏</label>
                                
                                <input type="radio" class="toss-sheet-radio" name="sheetType" id="songpa-jeonse" value="ÏÜ°ÌååÏ†ÑÏÑ∏">
                                <label class="toss-sheet-button" for="songpa-jeonse">ÏÜ°ÌååÏ†ÑÏÑ∏</label>
                            </div>
                        </div>

                        <!-- ÏÉÅÌÉú ÌïÑÌÑ∞ -->
                        <div class="toss-section">
                            <label class="toss-label">Îß§Î¨º ÏÉÅÌÉú</label>
                            <div class="toss-chip-group">
                                <input type="radio" class="toss-chip-radio" name="statusFilter" id="gongkeul" value="Í≥µÌÅ¥" checked>
                                <label class="toss-chip" for="gongkeul">Í≥µÌÅ¥</label>

                                <input type="radio" class="toss-chip-radio" name="statusFilter" id="onha" value="Ïò®Ìïò">
                                <label class="toss-chip" for="onha">Ïò®Ìïò</label>

                                <input type="radio" class="toss-chip-radio" name="statusFilter" id="ganmae" value="Í∞†Îß§">
                                <label class="toss-chip" for="ganmae">Í∞†Îß§</label>
                            </div>
                        </div>

                        <!-- Î≥¥Ï¶ùÍ∏à Î≤îÏúÑ -->
                        <div class="toss-section">
                            <label class="toss-label">Î≥¥Ï¶ùÍ∏à Î≤îÏúÑ</label>
                            <div class="toss-range-group">
                                <div class="toss-range-row">
                                    <div class="toss-input-wrapper">
                                        <input type="number" class="toss-number-input" id="depositBillionStart" placeholder="0" min="0">
                                        <span class="toss-unit">Ïñµ</span>
                                    </div>
                                    <div class="toss-input-wrapper">
                                        <input type="number" class="toss-number-input" id="depositMillionStart" placeholder="0" min="0">
                                        <span class="toss-unit">ÎßåÏõê</span>
                                    </div>
                                </div>
                                <div class="toss-range-divider">~</div>
                                <div class="toss-range-row">
                                    <div class="toss-input-wrapper">
                                        <input type="number" class="toss-number-input" id="depositBillionEnd" placeholder="0" min="0">
                                        <span class="toss-unit">Ïñµ</span>
                                    </div>
                                    <div class="toss-input-wrapper">
                                        <input type="number" class="toss-number-input" id="depositMillionEnd" placeholder="0" min="0">
                                        <span class="toss-unit">ÎßåÏõê</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ÏõîÏÑ∏ Î≤îÏúÑ -->
                        <div class="toss-section">
                            <label class="toss-label">ÏõîÏÑ∏ Î≤îÏúÑ</label>
                            <div class="toss-range-group">
                                <div class="toss-range-row">
                                    <div class="toss-input-wrapper">
                                        <input type="number" class="toss-number-input" id="monthlyRentStart" placeholder="0" min="0">
                                        <span class="toss-unit">ÎßåÏõê</span>
                                    </div>
                                </div>
                                <div class="toss-range-divider">~</div>
                                <div class="toss-range-row">
                                    <div class="toss-input-wrapper">
                                        <input type="number" class="toss-number-input" id="monthlyRentEnd" placeholder="0" min="0">
                                        <span class="toss-unit">ÎßåÏõê</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ï¥àÍ∏∞Ìôî Î≤ÑÌäº -->
                        <button id="resetButton" class="toss-reset-button">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M1 4V10H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M3.51 15A9 9 0 1 0 6 5L1 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî
                        </button>

                        <!-- ÏïàÎÇ¥ Î©îÏãúÏßÄ -->
                        <div style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 12px; margin-bottom: 16px; font-size: 14px; color: #6c757d;">
                            <div style="font-weight: 600; color: #495057; margin-bottom: 4px;">üìç ÏÇ¨Ïö© Î∞©Î≤ï</div>
                            <div>1. Îß§Î¨º Ïú†ÌòïÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</div>
                            <div>2. ÏïÑÎûò Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ Îß§Î¨ºÏùÑ Î°úÎìúÌïòÏÑ∏Ïöî</div>
                        </div>

                        <!-- Í≤ÄÏÉâ Î≤ÑÌäº -->
                        <button id="filterButton" class="toss-search-button">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                                <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Îß§Î¨º Í≤ÄÏÉâÌïòÍ∏∞
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- ÏÑ±Îä• Í∞úÏÑ†: JavaScript ÌååÏùº Ï∫êÏãú Î≤ÑÏä§ÌåÖ Î∞è defer ÏÜçÏÑ± Ï∂îÍ∞Ä -->
<script defer src="{{ url_for('static', filename='js/map.js') }}?v=20250103-perf-v2"></script>
<script>
// ÏÑ±Îä• Í∞úÏÑ†: DOMContentLoaded Ïù¥Î≤§Ìä∏ ÏµúÏ†ÅÌôî
document.addEventListener('DOMContentLoaded', function() {
    // DOM ÏöîÏÜå Ï∫êÏã±
    const filterToggle = document.getElementById('filterToggle');
    const filterContent = document.getElementById('filterContent');
    const chevronIcon = document.getElementById('chevronIcon');
    
    // Ï¥àÍ∏∞ ÏÉÅÌÉú ÏÑ§Ï†ï (Ïï†ÎãàÎ©îÏù¥ÏÖò ÏóÜÏù¥)
    filterContent.classList.remove('expanded');
    chevronIcon.style.transform = 'rotate(0deg)';
    
    // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Îì±Î°ù
    filterToggle.addEventListener('click', function() {
        const isExpanded = filterContent.classList.contains('expanded');
        
        // ÏÑ±Îä• Í∞úÏÑ†: requestAnimationFrame ÏÇ¨Ïö©
        requestAnimationFrame(() => {
            if (isExpanded) {
                filterContent.classList.remove('expanded');
                chevronIcon.style.transform = 'rotate(0deg)';
            } else {
                filterContent.classList.add('expanded');
                chevronIcon.style.transform = 'rotate(180deg)';
            }
        });
    });
});
</script>
{% endblock %}